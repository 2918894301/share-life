<!-- 首页 包含：自定义导航栏、分类导航、瀑布流内容、下拉刷新 -->
<view class="custom-nav" style="padding-top:{{statusBarHeight}}px">
  <view class="search-container">
    <view class="logo">
      <image src="/assets/images/logo.svg" mode="aspectFit" class="logo-image" />
    </view>
    <view class="search-box" bindtap="goToSearch">
      <view class="search-icon"></view>
      <input type="text" placeholder="搜点什么" placeholder-class="search-placeholder" disabled />
    </view>
    <image class="more-icon"></image>
  </view>
</view>
<view class="nav-container" style="top:{{statusBarHeight + 44}}px">
  <scroll-view scroll-x class="nav-scroll" enable-flex>
    <view class="nav-item {{currentTab === index ? 'active' : ''}}" wx:for="{{categories}}" wx:key="id" bindtap="switchTab" data-index="{{index}}">
      {{item.name}}
    </view>
  </scroll-view>
</view>
<scroll-view class="scrollarea" scroll-y type="list" bindscrolltolower="onReachBottom" enable-back-to-top enhanced show-scrollbar="{{false}}" refresher-enabled="{{true}}" refresher-threshold="{{80}}" refresher-default-style="none" refresher-background="transparent" refresher-triggered="{{isRefreshing}}" bindrefresherrefresh="onPullDownRefresh" style="padding-top:{{navHeight + 44}}px">
  <!-- 自定义下拉刷新指示器  定义下拉刷新插槽 -->
  <view slot="refresher" class="custom-refresher">
    <view class="refresher-content">
      <view class="refresher-icon {{isRefreshing ? 'rotating' : ''}}">⟳</view>
      <text class="refresher-text">{{isRefreshing ? '正在刷新...' : '下拉刷新'}}</text>
    </view>
  </view>
  <view class="waterfall-container">
    <view class="waterfall-left">
      <view wx:for="{{leftList}}" wx:key="id" class="waterfall-item">
        <note-card note="{{item}}" bind:likeChanged="onLikeChanged"></note-card>
      </view>
    </view>
    <view class="waterfall-right">
      <view wx:for="{{rightList}}" wx:key="id" class="waterfall-item">
        <note-card note="{{item}}" bind:likeChanged="onLikeChanged"></note-card>
      </view>
    </view>
  </view>
  <view class="load-status" wx:if="{{contentList.length > 0}}">
    <view wx:if="{{hasMore}}" class="loading-text">正在加载更多...</view>
    <view wx:else class="no-more-text">没有更多了</view>
  </view>
  <view wx:if="{{contentList.length === 0 && !isRefreshing}}" class="empty-state">
    <text>暂无内容</text>
  </view>
</scroll-view>